<div class="p-4">
  <!-- Top Bar -->
  <div class="flex justify-between items-center mb-3">
    <!-- Search -->
    <div class="w-1/3">
      <input 
        pInputText 
        type="text" 
        placeholder="Search supplier..."
        class="w-full p-2 border rounded-md"
        (input)="dt.filterGlobal($event.target.value, 'contains')" />
    </div>

    <!-- Add Button -->
    <button 
      class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
             px-2.5 py-1.5 rounded-md text-white shadow-sm 
         bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90
         flex items-center justify-center text-sm"
      (click)="openNew()">
      <i class="pi pi-plus"></i>
      Add Supplier
    </button>
  </div>

  <!-- Table -->
  <div class="border rounded-2xl shadow-md overflow-hidden">
    <p-table #dt 
         [value]="suppliers" 
         [loading]="loading"
         [paginator]="true"
         [rows]="rows"
         [first]="first"
         paginatorDropdownAppendTo="body"
         [totalRecords]="totalRecords"
         [rowsPerPageOptions]="[10, 20, 30]"
         (onPage)="onPageChange($event)"
         class="w-full"
         [globalFilterFields]="['name','phone','email','company','address','notes']">

      <!-- Header -->
      <ng-template pTemplate="header">
        <tr class="bg-gradient-to-r from-blue-600 to-indigo-500 text-white">
          <th pSortableColumn="name" class="px-3 py-2">
            Name <p-sortIcon field="name"></p-sortIcon>
          </th>
          <th class="px-3 py-2">Phone</th>
          <th class="px-3 py-2">Email</th>
          <th class="px-3 py-2">Company</th>
          <th class="px-3 py-2">Address</th>
          <th class="px-3 py-2">Notes</th>
          <th class="px-3 py-2 text-center">Actions</th>
        </tr>
      </ng-template>

      <!-- Body -->
      <ng-template pTemplate="body" let-supp>
        <tr>
          <td class="px-3 py-2">{{ supp.name }}</td>
          <td class="px-3 py-2">{{ supp.phone }}</td>
          <td class="px-3 py-2">{{ supp.email }}</td>
          <td class="px-3 py-2">{{ supp.company }}</td>
          <td class="px-3 py-2">{{ supp.address }}</td>
          <td class="px-3 py-2">{{ supp.notes }}</td>
          <td class="text-center px-3 py-2 flex justify-center gap-2">
            <!-- Edit -->
            <button 
              class="p-2 rounded-full text-white shadow-md 
                     bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90"
              (click)="editSupplier(supp)">
              <i class="pi pi-pencil"></i>
            </button>
            <!-- Delete -->
           <button 
  class="p-2 rounded-full text-white shadow-md 
         bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90"
  (click)="confirmDelete(supp._id!)">
  <i class="pi pi-trash"></i>
</button>

          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Add/Edit Dialog -->
  <p-dialog [(visible)]="displayDialog" 
            [modal]="true" 
            [closable]="true" 
            [style]="{width: '35vw'}"
            [header]="selectedSupplierId ? 'Edit Supplier' : 'Add Supplier'">

    <form [formGroup]="supplierForm" class="flex flex-col gap-3">
      <input pInputText type="text" placeholder="Name" formControlName="name" class="w-full p-2 border rounded-md" />
      <input pInputText type="text" placeholder="Phone" formControlName="phone" class="w-full p-2 border rounded-md" />
      <input pInputText type="text" placeholder="Email" formControlName="email" class="w-full p-2 border rounded-md" />
      <input pInputText type="text" placeholder="Company" formControlName="company" class="w-full p-2 border rounded-md" />
      <input pInputText type="text" placeholder="Address" formControlName="address" class="w-full p-2 border rounded-md" />
      <textarea formControlName="notes" placeholder="Notes" class="w-full p-2 border rounded-md"></textarea>
    </form>

    <ng-template pTemplate="footer">
      <button 
        class="px-4 py-2 rounded-lg text-gray-600 font-medium border hover:bg-gray-100"
        (click)="hideDialog()">
        <i class="pi pi-times mr-2"></i> Cancel
      </button>
      <button 
        class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
               bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90"
        (click)="saveSupplier()">
        <i class="pi pi-check mr-2"></i> Save
      </button>
    </ng-template>
  </p-dialog>

  <!-- Confirm Dialog -->
  <p-confirmDialog></p-confirmDialog>
</div>
