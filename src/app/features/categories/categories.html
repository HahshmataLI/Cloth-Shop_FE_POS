<div class="p-4">
  <!-- Top Bar: Search on Left, Add button on Right -->
  <div class="flex justify-between items-center mb-3">
    <!-- Search Input -->
    <div class="w-1/3">
      <input 
        pInputText 
        type="text" 
        placeholder="Search category..."
        class="w-full p-2 border rounded-md"
        (input)="dt.filterGlobal($event.target.value, 'contains')" />
    </div>

    <!-- Add Button -->
    <button 
      class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
             bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90 flex items-center gap-2"
      (click)="openDialog()">
      <i class="pi pi-plus"></i>
      Add Category
    </button>
  </div>

  <!-- Table -->
  <div class="border rounded-2xl shadow-md overflow-hidden">
    <p-table #dt 
         [value]="categories" 
         [loading]="loading"
         [paginator]="true"
         [rows]="rows"
         [first]="first"
         [totalRecords]="totalRecords"
         [rowsPerPageOptions]="[10, 20, 30]"
         (onPage)="onPageChange($event)"
         class="w-full"
         [globalFilterFields]="['name']">

      <!-- Gradient Header Row -->
      <ng-template pTemplate="header">
        <tr class="bg-gradient-to-r from-blue-600 to-indigo-500 text-white">
          <th pSortableColumn="name" class="px-3 py-2">
            Category <p-sortIcon field="name"></p-sortIcon>
          </th>
          <th class="px-3 py-2">Created At</th>
          <th class="px-3 py-2">Updated At</th>
          <th class="px-3 py-2 text-center">Actions</th>
        </tr>
      </ng-template>

      <!-- Table Body -->
      <ng-template pTemplate="body" let-cat>
        <tr>
          <td class="px-3 py-2">{{ cat.name }}</td>
          <td class="px-3 py-2">{{ cat.createdAt | date:'short' }}</td>
          <td class="px-3 py-2">{{ cat.updatedAt | date:'short' }}</td>
          <td class="px-3 py-2">
  <div class="flex justify-center items-center gap-2">
    <!-- Edit Button -->
    <button 
      class="px-2.5 py-1.5 rounded-md text-white shadow-sm 
             bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90
             flex items-center justify-center text-sm"
      (click)="editCategory(cat)">
      <i class="pi pi-pencil"></i>
    </button>

    <!-- Delete Button -->
    <button 
      class="px-2.5 py-1.5 rounded-md text-white shadow-sm 
             bg-gradient-to-r from-red-500 to-pink-500 hover:opacity-90
             flex items-center justify-center text-sm"
      (click)="deleteCategory(cat)">
      <i class="pi pi-trash"></i>
    </button>
  </div>
</td>

        </tr>
      </ng-template>

    </p-table>
  </div>

  <!-- Add/Edit Category Dialog -->
  <p-dialog [(visible)]="displayDialog" header="Category" 
            [modal]="true" [closable]="true" [style]="{width: '30vw'}">
    <div class="flex flex-col gap-3">
      <input pInputText type="text" placeholder="Category Name" 
             [(ngModel)]="newCategory.name" class="w-full p-2 border rounded-md" />
    </div>
    <ng-template pTemplate="footer">
      <button 
        class="px-4 py-2 rounded-lg text-gray-600 font-medium border hover:bg-gray-100"
        (click)="displayDialog=false">
        <i class="pi pi-times mr-2"></i> Cancel
      </button>
      <button 
        class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
               bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90"
        (click)="saveCategory()">
        <i class="pi pi-check mr-2"></i> Save
      </button>
    </ng-template>
  </p-dialog>
</div>
