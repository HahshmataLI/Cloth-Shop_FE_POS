<div class="max-w-5xl mx-auto bg-white shadow-lg rounded-2xl p-8">
  <!-- Title -->
  <h2 class="text-3xl font-bold text-blue-600 mb-8 text-center">
    Add Purchase
  </h2>

  <!-- Form Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- Supplier -->
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Supplier</label>
      <p-select
        [options]="suppliers"
        optionLabel="name"
        optionValue="_id"
        appendTo="body"
        [(ngModel)]="purchase.supplier"
        placeholder="Select Supplier"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
      ></p-select>
    </div>

    <!-- Date -->
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Date</label>
      <p-datepicker
        [(ngModel)]="purchase.date"
        dateFormat="dd/mm/yy"
        class="w-full border border-gray-300 rounded-lg"
      ></p-datepicker>
    </div>

    <!-- Payment Method -->
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Payment Method</label>
      <p-select
        [options]="paymentMethods"
        appendTo="body"
        [(ngModel)]="purchase.paymentMethod"
        placeholder="Select Method"
        class="w-full border border-gray-300 rounded-lg"
      ></p-select>
    </div>
  </div>

  <!-- Items Table -->
 <!-- Items Table -->
<div class="mt-8">
  <h3 class="text-lg font-semibold text-gray-800 mb-3">Items</h3>
  <div class="border rounded-2xl shadow-md overflow-hidden">
    <p-table 
      [value]="purchase.items"
      [responsiveLayout]="'scroll'" 
      class="w-full">

      <!-- Header -->
      <ng-template pTemplate="header">
        <tr class="bg-gradient-to-r from-blue-600 to-indigo-500 text-white">
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit Cost</th>
          <th>Total</th>
          <th class="text-center">Actions</th>
        </tr>
      </ng-template>

      <!-- Body -->
      <ng-template pTemplate="body" let-item let-i="rowIndex">
        <tr>
          <!-- Product -->
          <td class="px-3 py-2">
            <p-select
              [options]="products"
              optionLabel="name"
              optionValue="_id"
              appendTo="body"
              [(ngModel)]="item.product"
              placeholder="Select Product"
              class="w-full"
            ></p-select>
          </td>

          <!-- Quantity -->
          <td class="px-3 py-2">
            <input
              type="number"
              pInputText
              [(ngModel)]="item.quantity"
              (input)="updateTotals()"
              class="w-full border rounded-lg px-2 py-1"
            />
          </td>

          <!-- Unit Cost -->
          <td class="px-3 py-2">
            <input
              type="number"
              pInputText
              [(ngModel)]="item.unitCost"
              (input)="updateTotals()"
              class="w-full border rounded-lg px-2 py-1"
            />
          </td>

          <!-- Total -->
          <td class="px-3 py-2 font-medium text-gray-700">
            {{ item.quantity * item.unitCost | currency:'PKR' }}
          </td>

          <!-- Actions -->
          <td class="px-3 py-2 text-center">
            <button
              class="px-2.5 py-1.5 rounded-md text-white shadow-sm 
                     bg-gradient-to-r from-red-500 to-pink-500 hover:opacity-90
                     flex items-center justify-center text-sm"
              (click)="removeItem(i)">
              <i class="pi pi-trash"></i>
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Add Item Button -->
  <button
    class="mt-3 px-4 rounded-lg text-white font-medium shadow-md  py-2 bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90 flex items-center gap-2"
    (click)="addItem()"
  >
             
    <i class="pi pi-plus"></i>
    Add Item
  </button>
</div>


  <!-- Totals -->
  <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Subtotal</label>
      <input
        type="number"
        [(ngModel)]="purchase.subTotal"
        readonly
        class="w-full border rounded-lg px-3 py-2 bg-gray-100"
      />
    </div>
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Tax</label>
      <input
        type="number"
        [(ngModel)]="purchase.tax"
        (input)="updateTotals()"
        class="w-full border rounded-lg px-3 py-2"
      />
    </div>
    <div>
      <label class="block text-gray-700 mb-2 font-semibold">Grand Total</label>
      <input
        type="number"
        [(ngModel)]="purchase.grandTotal"
        readonly
        class="w-full border rounded-lg px-3 py-2 bg-gray-100"
      />
    </div>
  </div>

  <!-- Save Button -->
  <div class="mt-10 text-center">
    <button
      pButton
      label="Save Purchase"
      class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
             bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90 flex items-center gap-2"
      (click)="savePurchase()"
    >
      Save Purchase
    </button>
  </div>
</div>
