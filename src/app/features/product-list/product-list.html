<div class="p-4">
  <!-- Top Bar -->
  <div class="flex justify-between items-center mb-3">
    <!-- Search -->
    <div class="w-1/3">
      <input 
        pInputText 
        type="text" 
        placeholder="Search products..."
        class="w-full p-2 border rounded-md"
        (input)="searchText = $event.target.value" />
    </div>

    <!-- Add Button -->
    <button 
      class="px-4 py-2 rounded-lg text-white font-medium shadow-md 
             bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90 flex items-center gap-2"
      routerLink="/add-product">
      <i class="pi pi-plus"></i>
      Add Product
    </button>
  </div>

  <!-- Product Table -->
  <div class="border rounded-2xl shadow-md overflow-hidden">
    <p-table 
      [value]="filteredProducts"
      [loading]="loading"
      [paginator]="true"
      [rows]="rows"
      [first]="first"
      paginatorDropdownAppendTo="body"
      [rowsPerPageOptions]="[5,10,20]"
      (onPage)="onPageChange($event)"
      class="w-full">

      <!-- Header -->
      <ng-template pTemplate="header">
        <tr class="bg-gradient-to-r from-blue-600 to-indigo-500 text-white">
          <th>Name</th>
          <th>SKU</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th class="text-center">Actions</th>
        </tr>
      </ng-template>

      <!-- Body -->
      <ng-template pTemplate="body" let-prod>
        <tr>
          <td class="px-3 py-2">{{ prod.name }}</td>
          <td class="px-3 py-2">{{ prod.sku }}</td>
          <td class="px-3 py-2">{{ prod.category?.name }}</td>
          <td class="px-3 py-2">{{ prod.salePrice | currency:'PKR' }}</td>
         <td class="px-3 py-2">
  <span 
    [ngClass]="{
      'bg-red-100 text-red-700 border-red-300': prod.stockQuantity === 0,
      'bg-orange-100 text-orange-700 border-orange-300': prod.stockQuantity > 0 && prod.stockQuantity <= 5,
      'bg-green-100 text-green-700 border-green-300': prod.stockQuantity > 5
    }"
    class="px-2 py-1 rounded-full text-xs font-medium border">
    {{ prod.stockQuantity === 0 
        ? 'Out of Stock' 
        : prod.stockQuantity <= 5 
          ? 'Low Stock (' + prod.stockQuantity + ')' 
          : 'In Stock (' + prod.stockQuantity + ')' }}
  </span>
</td>

          <td class="text-center px-3 py-2 flex justify-center gap-2">
            <!-- Edit -->
            <button 
              class="px-2.5 py-1.5 rounded-md text-white shadow-sm 
         bg-gradient-to-r from-blue-600 to-indigo-500 hover:opacity-90
         flex items-center justify-center text-sm"
              (click)="openDialog(prod)">
              <i class="pi pi-pencil"></i>
            </button>
            <!-- Delete with confirmation -->
            <button 
              class="px-2.5 py-1.5 rounded-md text-white shadow-sm 
         bg-gradient-to-r from-red-500 to-pink-500 hover:opacity-90
         flex items-center justify-center text-sm"
              (click)="confirmDelete(prod)">
              <i class="pi pi-trash"></i>
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Confirm Dialog -->
  <p-confirmDialog></p-confirmDialog>
</div>
